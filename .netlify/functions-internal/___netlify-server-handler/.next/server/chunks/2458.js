"use strict";exports.id=2458,exports.ids=[2458],exports.modules={92458:(e,t,s)=>{s.d(t,{FacebookProvider:()=>c});var a=s(1964),i=s(57435);class c{static{this.API_BASE=a.OB.GRAPH_API_BASE||"https://graph.facebook.com"}static{this.API_VERSION="v18.0"}static async makeRequest(e,t={}){let s=`${this.API_BASE}/${this.API_VERSION}${e}`;try{let e=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}}),a=await e.json();if(!e.ok)throw{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||`HTTP ${e.status}`,retryable:this.isRetryableError(e.status,a.error?.code),statusCode:e.status};return a}catch(t){if(t instanceof Error&&"code"in t)throw t;throw i.k.error(`Facebook API request failed: ${e}`,t),{code:"NETWORK_ERROR",message:t.message,retryable:!0}}}static isRetryableError(e,t){return 429===e||e>=500||["API_TEMPORARILY_UNAVAILABLE","SERVICE_UNAVAILABLE","TEMPORARY_ISSUE"].includes(t||"")}static async getLongLivedUserToken(e){return(await this.makeRequest("/oauth/access_token",{method:"POST",body:JSON.stringify({grant_type:"fb_exchange_token",client_id:a.OB.FACEBOOK_APP_ID,client_secret:a.OB.FACEBOOK_APP_SECRET,fb_exchange_token:e})})).access_token}static async getPageAccessToken(e,t){return(await this.makeRequest(`/${t}?fields=access_token&access_token=${e}`)).access_token}static async createPageEvent(e,t,s){let a=await this.makeRequest(`/${t}/events`,{method:"POST",body:JSON.stringify({...s,access_token:e})});return{id:a.id,url:`https://www.facebook.com/events/${a.id}`}}static async updatePageEvent(e,t,s){let a=await this.makeRequest(`/${t}`,{method:"POST",body:JSON.stringify({...s,access_token:e})});return{id:a.id,url:`https://www.facebook.com/events/${a.id}`}}static async deletePageEvent(e,t){await this.makeRequest(`/${t}`,{method:"DELETE",body:JSON.stringify({access_token:e})})}static async createPagePost(e,t,s){let a=`/${t}/feed`,i={message:s.message,access_token:e};if(s.imageUrl){let a=await this.makeRequest(`/${t}/photos`,{method:"POST",body:JSON.stringify({url:s.imageUrl,caption:s.message,access_token:e})});i={message:s.message,attached_media:`[{"media_fbid":"${a.id}"}]`,access_token:e}}else s.link&&(i.link=s.link);let c=await this.makeRequest(a,{method:"POST",body:JSON.stringify(i)});return{id:c.id,url:`https://www.facebook.com/${t}/posts/${c.id.split("_")[1]}`}}static async igCreateMedia(e,t,s){return{id:(await this.makeRequest(`/${e}/media`,{method:"POST",body:JSON.stringify({...s,access_token:t})})).id}}static async igPublishMedia(e,t,s){let a=await this.makeRequest(`/${e}/media_publish`,{method:"POST",body:JSON.stringify({creation_id:s,access_token:t})});return{id:a.id,url:`https://www.instagram.com/p/${a.id}/`}}static async igGetMediaStatus(e,t,s){let a=await this.makeRequest(`/${s}?fields=status_code,status&access_token=${t}`);return{status:a.status_code,error:"FINISHED"!==a.status_code?a:void 0}}static async getPageInfo(e,t){return this.makeRequest(`/${t}?fields=id,name,category,fan_count&access_token=${e}`)}static async getInstagramAccountInfo(e,t){return this.makeRequest(`/${e}?fields=id,username,account_type,media_count&access_token=${t}`)}static async validateToken(e){try{return await this.makeRequest(`/me?access_token=${e}`),!0}catch(e){return!1}}}}};