(()=>{var e={};e.id=1466,e.ids=[1466],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},79600:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(2510),s(49474),s(35866),s(11506);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(public)",{children:["venues",{children:["[city]",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2510)),"/Users/kumar/Business admin/tripfluence-admin/app/(public)/venues/[city]/[slug]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,49474)),"/Users/kumar/Business admin/tripfluence-admin/app/(public)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/Users/kumar/Business admin/tripfluence-admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kumar/Business admin/tripfluence-admin/app/(public)/venues/[city]/[slug]/page.tsx"],u="/(public)/venues/[city]/[slug]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(public)/venues/[city]/[slug]/page",pathname:"/venues/[city]/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},76152:(e,t,s)=>{Promise.resolve().then(s.bind(s,20599))},20599:(e,t,s)=>{"use strict";s.d(t,{VenueDetail:()=>C});var r=s(10326),a=s(17577),i=s(46226),n=s(90434),l=s(567),o=s(90772),d=s(33071),c=s(68483),u=s(45091),m=s(85567),p=s(56562),f=s(2634),h=s(60850);let x=(0,s(62881).Z)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);var g=s(77636),v=s(24061),y=s(30361),_=s(7027),b=s(30446),j=s(54432),N=s(31048),E=s(87673),S=s(9346),T=s(30811),R=s(37358),w=s(48998),P=s(40617),O=s(45079),A=s(77863),I=s(94215);function D({spaceId:e}){let{toast:t}=(0,I.pm)(),[s,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)({title:"",description:"",attendees:1,startDate:void 0,endDate:void 0,startTime:"",endTime:"",message:""}),d=async s=>{if(s.preventDefault(),!n.startDate||!n.endDate||!n.startTime||!n.endTime){t({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}i(!0);try{let s=new Date(n.startDate),[r,a]=n.startTime.split(":").map(Number);s.setHours(r,a);let i=new Date(n.endDate),[o,d]=n.endTime.split(":").map(Number);if(i.setHours(o,d),!(await fetch("/api/space/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaceId:e,title:n.title,description:n.description,attendees:n.attendees,start:s.toISOString(),end:i.toISOString(),organizerId:"guest-user"})})).ok)throw Error("Failed to submit request");t({title:"Request Submitted",description:"Your booking request has been sent to the host. You'll receive a response within 24 hours."}),l({title:"",description:"",attendees:1,startDate:void 0,endDate:void 0,startTime:"",endTime:"",message:""})}catch(e){t({title:"Error",description:"Failed to submit your request. Please try again.",variant:"destructive"})}finally{i(!1)}};return(0,r.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"title",children:"Event Title *"}),r.jsx(j.I,{id:"title",placeholder:"e.g., Yoga Workshop",value:n.title,onChange:e=>l(t=>({...t,title:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"description",children:"Description"}),r.jsx(E.g,{id:"description",placeholder:"Tell the host about your event...",value:n.description,onChange:e=>l(t=>({...t,description:e.target.value})),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"attendees",children:"Number of Guests *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(v.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(j.I,{id:"attendees",type:"number",min:"1",value:n.attendees,onChange:e=>l(t=>({...t,attendees:parseInt(e.target.value)||1})),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{children:"Start Date *"}),(0,r.jsxs)(T.J2,{children:[r.jsx(T.xo,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",className:(0,A.cn)("w-full justify-start text-left font-normal",!n.startDate&&"text-muted-foreground"),children:[r.jsx(R.Z,{className:"mr-2 h-4 w-4"}),n.startDate?(0,O.WU)(n.startDate,"PPP"):"Select date"]})}),r.jsx(T.yk,{className:"w-auto p-0",align:"start",children:r.jsx(S.f,{mode:"single",selected:n.startDate,onSelect:e=>l(t=>({...t,startDate:e})),disabled:e=>e<new Date,initialFocus:!0})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{children:"End Date *"}),(0,r.jsxs)(T.J2,{children:[r.jsx(T.xo,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",className:(0,A.cn)("w-full justify-start text-left font-normal",!n.endDate&&"text-muted-foreground"),children:[r.jsx(R.Z,{className:"mr-2 h-4 w-4"}),n.endDate?(0,O.WU)(n.endDate,"PPP"):"Select date"]})}),r.jsx(T.yk,{className:"w-auto p-0",align:"start",children:r.jsx(S.f,{mode:"single",selected:n.endDate,onSelect:e=>l(t=>({...t,endDate:e})),disabled:e=>e<new Date||n.startDate&&e<n.startDate,initialFocus:!0})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"startTime",children:"Start Time *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(w.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(j.I,{id:"startTime",type:"time",value:n.startTime,onChange:e=>l(t=>({...t,startTime:e.target.value})),className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"endTime",children:"End Time *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(w.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(j.I,{id:"endTime",type:"time",value:n.endTime,onChange:e=>l(t=>({...t,endTime:e.target.value})),className:"pl-10",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"message",children:"Message to Host"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(P.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(E.g,{id:"message",placeholder:"Any special requests or questions...",value:n.message,onChange:e=>l(t=>({...t,message:e.target.value})),className:"pl-10",rows:3})]})]}),r.jsx(o.z,{type:"submit",className:"w-full",disabled:s,children:s?"Submitting...":"Request to Book"}),r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"You'll receive a response within 24 hours. No payment required until approved."})]})}let k={WiFi:u.Z,"Coffee Machine":m.Z,"Sound System":p.Z,"Audio System":p.Z,Projector:f.Z,"Natural Light":h.Z,Parking:x};function C({space:e}){let[t,s]=(0,a.useState)(0);e.location.address.split(",")[1]?.trim();let u=e.amenities.reduce((e,t)=>{let s=t.category||"Other";return e[s]||(e[s]=[]),e[s].push(t),e},{});return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:e.location.address})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(v.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsxs)("span",{children:["Up to ",e.capacity," guests"]})]}),e.floorAreaM2&&(0,r.jsxs)("span",{children:[e.floorAreaM2,"m\xb2"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"relative h-64 md:h-96 rounded-lg overflow-hidden",children:r.jsx(i.default,{src:e.photos[t]||"/placeholder-venue.jpg",alt:e.title,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 50vw"})}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.photos.slice(0,4).map((a,n)=>r.jsx("button",{onClick:()=>s(n),className:`relative h-20 md:h-24 rounded-lg overflow-hidden ${t===n?"ring-2 ring-primary":""}`,children:r.jsx(i.default,{src:a,alt:`${e.title} ${n+1}`,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 50vw, 25vw"})},n))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"About this space"}),r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Amenities"}),r.jsx("div",{className:"space-y-4",children:Object.entries(u).map(([e,t])=>(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:e}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.map(e=>{let t=k[e.label];return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[t?r.jsx(t,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(y.Z,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.label})]},e.id)})})]},e))})]}),e.rules.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"House Rules"}),r.jsx("div",{className:"space-y-2",children:e.rules.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx(y.Z,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.label,e.required&&r.jsx(l.C,{variant:"secondary",className:"ml-2 text-xs",children:"Required"})]})]},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Hosted by ",e.business.name]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-muted rounded-full flex items-center justify-center",children:r.jsx("span",{className:"font-semibold text-lg",children:e.business.name.charAt(0)})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.business.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e._count.requests," successful bookings"]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)(d.Zb,{className:"sticky top-4",children:[r.jsx(d.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(d.ll,{className:"text-2xl",children:(0,b.T4)(e.minHourlyRate)}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"per hour"})]})}),(0,r.jsxs)(d.aY,{children:[r.jsx(D,{spaceId:e.id}),r.jsx(c.Z,{className:"my-4"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Capacity:"}),(0,r.jsxs)("span",{children:[e.capacity," guests"]})]}),e.floorAreaM2&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Area:"}),(0,r.jsxs)("span",{children:[e.floorAreaM2,"m\xb2"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Bookings:"}),r.jsx("span",{children:e._count.requests})]})]}),r.jsx(c.Z,{className:"my-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o.z,{asChild:!0,className:"w-full",children:(0,r.jsxs)(n.default,{href:`https://maps.google.com/?q=${e.location.lat},${e.location.lng}`,target:"_blank",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Get Directions",r.jsx(_.Z,{className:"h-4 w-4 ml-2"})]})}),e.business.domain&&r.jsx(o.z,{variant:"outline",asChild:!0,className:"w-full",children:(0,r.jsxs)(n.default,{href:`https://${e.business.domain}`,target:"_blank",children:["Visit Host Website",r.jsx(_.Z,{className:"h-4 w-4 ml-2"})]})})]})]})]})})]})]})}},9346:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var r=s(10326);s(17577);var a=s(11890),i=s(39183),n=s(67937),l=s(77863),o=s(90772);function d({className:e,classNames:t,showOutsideDays:s=!0,...d}){return r.jsx(n._,{"data-testid":"calendar",showOutsideDays:s,className:(0,l.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>r.jsx(a.Z,{className:"h-4 w-4"}),IconRight:({...e})=>r.jsx(i.Z,{className:"h-4 w-4"})},...d})}d.displayName="Calendar"},33071:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>o});var r=s(10326),a=s(17577),i=s(77863);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},54432:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(10326),a=s(17577),i=s(77863);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},31048:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var r=s(10326),a=s(17577),i=s(34478),n=s(79360),l=s(77863);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},s)=>r.jsx(i.f,{ref:s,className:(0,l.cn)(o(),e),...t}));d.displayName=i.f.displayName},30811:(e,t,s)=>{"use strict";s.d(t,{J2:()=>l,xo:()=>o,yk:()=>d});var r=s(10326),a=s(17577),i=s(74964),n=s(77863);let l=i.fC,o=i.xz,d=a.forwardRef(({className:e,align:t="center",sideOffset:s=4,...a},l)=>r.jsx(i.h_,{children:r.jsx(i.VY,{ref:l,align:t,sideOffset:s,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));d.displayName=i.VY.displayName},68483:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(10326),a=s(17577),i=s(45226),n="horizontal",l=["horizontal","vertical"],o=a.forwardRef((e,t)=>{let{decorative:s,orientation:a=n,...o}=e,d=l.includes(a)?a:n;return(0,r.jsx)(i.WV.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:t})});o.displayName="Separator";var d=s(77863);let c=a.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},i)=>r.jsx(o,{ref:i,decorative:s,orientation:t,className:(0,d.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=o.displayName},87673:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var r=s(10326),a=s(17577),i=s(77863);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));n.displayName="Textarea"},94215:(e,t,s)=>{"use strict";s.d(t,{Am:()=>u,pm:()=>m});var r=s(17577);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},30361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7027:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},40617:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},60850:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},2510:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,dynamic:()=>c,generateMetadata:()=>m});var r=s(19510),a=s(71159),i=s(58585);let n=(0,s(68570).createProxy)(String.raw`/Users/kumar/Business admin/tripfluence-admin/components/public/VenueDetail.tsx#VenueDetail`);var l=s(38978),o=s(9487),d=s(67829);let c="force-dynamic";async function u({params:e}){let{city:t,slug:s}=await e,c=await o.db.space.findFirst({where:{slug:s,status:"PUBLISHED"},include:{amenities:!0,rules:!0,pricingRules:!0,business:{select:{id:!0,name:!0,slug:!0,domain:!0}},_count:{select:{requests:{where:{status:"CONFIRMED"}}}}}});c||(0,i.notFound)();let u=(0,d.h0)(c.pricingRules);return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx(a.Suspense,{fallback:r.jsx(l.w9,{}),children:r.jsx(n,{space:{...c,minHourlyRate:u}})})})}async function m({params:e}){let t=await o.db.space.findFirst({where:{slug:slug,status:"PUBLISHED"},include:{business:{select:{name:!0}}}});if(!t)return{title:"Venue Not Found"};let s=t.location?.address?.split(",")[1]?.trim()||"Unknown",r=`${t.title} - ${s} | Tripfluence`,a=t.description.slice(0,160);return{title:r,description:a,openGraph:{title:r,description:a,images:t.photos.length>0?[t.photos[0]]:[],type:"website"},twitter:{card:"summary_large_image",title:r,description:a,images:t.photos.length>0?[t.photos[0]]:[]}}}},9487:(e,t,s)=>{"use strict";s.d(t,{db:()=>l});var r=s(53524),a=s(1964);let i=globalThis,n=()=>({$queryRaw:()=>Promise.resolve([]),$executeRaw:()=>Promise.resolve(0),$transaction:e=>e({}),user:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},business:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},space:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},socialAccount:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},webhookDelivery:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},auditLog:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},spaceAvailability:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},spaceRequest:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)}}),l=(()=>{process.env.SKIP_ENV_VALIDATION;try{return i.prisma??new r.PrismaClient({log:"development"===a.OB.NODE_ENV?["query","error","warn"]:["error"],datasources:{db:{url:a.OB.DATABASE_URL}}})}catch(e){return console.warn("Database connection failed during build, using mock database:",e),n()}return i.prisma??new r.PrismaClient({log:"development"===a.OB.NODE_ENV?["query","error","warn"]:["error"],datasources:{db:{url:a.OB.DATABASE_URL}}})})();"production"!==a.OB.NODE_ENV&&(i.prisma=l)},1964:(e,t,s)=>{"use strict";s.d(t,{OB:()=>i});var r=s(88879);let a=r.Ryn({DATABASE_URL:r.Z_8().url("Invalid database URL"),REDIS_URL:r.Z_8().url("Invalid Redis URL").optional(),JWT_SECRET:r.Z_8().min(32,"JWT secret must be at least 32 characters"),NEXTAUTH_SECRET:r.Z_8().min(32,"NextAuth secret must be at least 32 characters").optional(),NEXTAUTH_URL:r.Z_8().url("Invalid NextAuth URL").optional(),STRIPE_SECRET_KEY:r.Z_8().startsWith("sk_","Invalid Stripe secret key").optional(),STRIPE_PUBLISHABLE_KEY:r.Z_8().startsWith("pk_","Invalid Stripe publishable key").optional(),STRIPE_WEBHOOK_SECRET:r.Z_8().optional(),RAZORPAY_KEY_ID:r.Z_8().optional(),RAZORPAY_KEY_SECRET:r.Z_8().optional(),RAZORPAY_WEBHOOK_SECRET:r.Z_8().optional(),WEBHOOK_SECRET:r.Z_8().min(32,"Webhook secret must be at least 32 characters"),FACEBOOK_APP_ID:r.Z_8().optional(),FACEBOOK_APP_SECRET:r.Z_8().optional(),FACEBOOK_PAGE_CONFIG_ID:r.Z_8().optional(),INSTAGRAM_CONFIG_ID:r.Z_8().optional(),GOOGLE_CLIENT_ID:r.Z_8().optional(),GOOGLE_CLIENT_SECRET:r.Z_8().optional(),EVENTBRITE_CLIENT_ID:r.Z_8().optional(),EVENTBRITE_CLIENT_SECRET:r.Z_8().optional(),MEETUP_CLIENT_ID:r.Z_8().optional(),MEETUP_CLIENT_SECRET:r.Z_8().optional(),OAUTH_REDIRECT_BASE:r.Z_8().url("Invalid OAuth redirect base URL").optional(),GRAPH_API_BASE:r.Z_8().url("Invalid Graph API base URL").default("https://graph.facebook.com"),GOOGLE_BUSINESS_API_BASE:r.Z_8().url("Invalid Google Business Profile API base URL").default("https://mybusiness.googleapis.com"),ENCRYPTION_KEY:r.Z_8().length(64,"Encryption key must be 64 hex characters (32 bytes)").optional(),FEATURE_REAL_PROVIDERS:r.Z_8().transform(e=>"true"===e).default("false"),SMTP_HOST:r.Z_8().optional(),SMTP_PORT:r.Z_8().transform(Number).optional(),SMTP_USER:r.Z_8().optional(),SMTP_PASSWORD:r.Z_8().optional(),SMTP_FROM:r.Z_8().email("Invalid SMTP from email").optional(),TWILIO_ACCOUNT_SID:r.Z_8().optional(),TWILIO_AUTH_TOKEN:r.Z_8().optional(),TWILIO_PHONE_NUMBER:r.Z_8().optional(),AWS_ACCESS_KEY_ID:r.Z_8().optional(),AWS_SECRET_ACCESS_KEY:r.Z_8().optional(),AWS_REGION:r.Z_8().optional(),AWS_S3_BUCKET:r.Z_8().optional(),SENTRY_DSN:r.Z_8().url("Invalid Sentry DSN").optional(),NODE_ENV:r.KmV(["development","production","test"]).default("development"),PORT:r.Z_8().transform(Number).default("3000")}),i=(()=>{if("true"===process.env.SKIP_ENV_VALIDATION)return{DATABASE_URL:process.env.DATABASE_URL||"postgresql://dummy:dummy@localhost:5432/dummy",JWT_SECRET:process.env.JWT_SECRET||"dummy-jwt-secret-key-minimum-32-characters-long",WEBHOOK_SECRET:process.env.WEBHOOK_SECRET||"dummy-webhook-secret-key-minimum-32-characters-long",NODE_ENV:"production",PORT:process.env.PORT||"3000",FEATURE_REAL_PROVIDERS:!1,GRAPH_API_BASE:"https://graph.facebook.com",GOOGLE_BUSINESS_API_BASE:"https://mybusiness.googleapis.com"};try{return a.parse(process.env)}catch(e){if(e instanceof r.jmq&&e.errors){let t=e.errors.filter(e=>"invalid_type"===e.code&&"undefined"===e.received).map(e=>e.path.join(".")),s=e.errors.filter(e=>"invalid_type"!==e.code).map(e=>`${e.path.join(".")}: ${e.message}`),r="Environment validation failed:\n";throw t.length>0&&(r+=`
Missing required variables:
${t.map(e=>`  - ${e}`).join("\n")}`),s.length>0&&(r+=`
Invalid variables:
${s.map(e=>`  - ${e}`).join("\n")}`),Error(r)}throw e}})();i.NODE_ENV,i.NODE_ENV,i.NODE_ENV},67829:(e,t,s)=>{"use strict";s.d(t,{Z4:()=>a,h0:()=>i,lx:()=>n});var r=s(53524);function a(e,t,s){let a=s.end.getTime()-s.start.getTime(),i=Math.ceil(a/36e5),n=Math.ceil(a/864e5),l=[],o=0,d=0,c=0,u=0,m=0,p=t.find(e=>e.kind===r.PricingKind.HOURLY),f=t.find(e=>e.kind===r.PricingKind.DAILY);if(f&&i>=8&&f){let e=f.amount*n;d=e,l.push({label:`Daily rate (${n} day${n>1?"s":""})`,amount:e,kind:r.PricingKind.DAILY})}else if(p){let e=p.amount*i;d=e,l.push({label:`Hourly rate (${i} hour${i>1?"s":""})`,amount:e,kind:r.PricingKind.HOURLY})}let h=t.find(e=>e.kind===r.PricingKind.PEAK);if(h&&function(e,t,s){if(s.dow&&s.dow.length>0){let r=e.getDay(),a=t.getDay();if(!s.dow.some(e=>r<=a?e>=r&&e<=a:e>=r||e<=a))return!1}if(null!==s.startHour&&null!==s.endHour){let r=e.getHours();return!(t.getHours()<=s.startHour||r>=s.endHour)}return!0}(s.start,s.end,h)){let e=function(e,t,s){let r=Math.ceil((s.end.getTime()-s.start.getTime())/36e5);return Math.round(Math.max(0,t.amount-e/r)*r)}(d,h,s);e>0&&(c=e,l.push({label:"Peak time surcharge",amount:e,kind:r.PricingKind.PEAK}))}let x=t.find(e=>e.kind===r.PricingKind.CLEANING_FEE);x&&(u=x.amount,l.push({label:"Cleaning fee",amount:u,kind:r.PricingKind.CLEANING_FEE}));let g=t.find(e=>e.kind===r.PricingKind.SECURITY_DEPOSIT);g&&(m=g.amount,l.push({label:"Security deposit",amount:m,kind:r.PricingKind.SECURITY_DEPOSIT}));let v=(o=d+c+u)+m;return{lines:l,subtotal:o,total:v,currency:t[0]?.currency||"USD",breakdown:{base:d,peak:c,cleaning:u,deposit:m}}}function i(e){let t=e.find(e=>e.kind===r.PricingKind.HOURLY),s=e.find(e=>e.kind===r.PricingKind.DAILY),a=t?.amount||0;if(s){let e=Math.ceil(s.amount/8);a=a>0?Math.min(a,e):e}return a}function n(e){let t=[],s=e.some(e=>e.kind===r.PricingKind.HOURLY),a=e.some(e=>e.kind===r.PricingKind.DAILY);s||a||t.push("At least one base pricing rule (hourly or daily) is required");let i=e.map(e=>e.kind),n=i.filter((e,t)=>i.indexOf(e)!==t);for(let s of(n.length>0&&t.push(`Duplicate pricing rule types: ${n.join(", ")}`),e.filter(e=>e.kind===r.PricingKind.PEAK)))s.dow&&0===s.dow.length&&(null===s.startHour||null===s.endHour)&&t.push("Peak pricing rule must specify either days of week or time range");return t}},58585:(e,t,s)=>{"use strict";var r=s(61085);s.o(r,"notFound")&&s.d(t,{notFound:function(){return r.notFound}}),s.o(r,"redirect")&&s.d(t,{redirect:function(){return r.redirect}})},61085:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return r.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=s(83953),a=s(16399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{isNotFoundError:function(){return a},notFound:function(){return r}});let s="NEXT_NOT_FOUND";function r(){let e=Error(s);throw e.digest=s,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return s}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RedirectType:function(){return r},getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let a=s(54580),i=s(72934),n=s(8586),l="NEXT_REDIRECT";function o(e,t,s){void 0===s&&(s=n.RedirectStatusCode.TemporaryRedirect);let r=Error(l);r.digest=l+";"+t+";"+e+";"+s+";";let i=a.requestAsyncStorage.getStore();return i&&(r.mutableCookies=i.mutableCookies),r}function d(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw o(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw o(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,s,r,a]=e.digest.split(";",4),i=Number(a);return t===l&&("replace"===s||"push"===s)&&"string"==typeof r&&!isNaN(i)&&i in n.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},34478:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var r=s(17577),a=s(45226),i=s(10326),n=r.forwardRef((e,t)=>(0,i.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,147,1365,354,6582,5403,5079,1201,4071,5705,3182,6264,5383],()=>s(79600));module.exports=r})();