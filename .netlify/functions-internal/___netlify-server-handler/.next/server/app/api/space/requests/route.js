"use strict";(()=>{var e={};e.id=9225,e.ids=[9225,1909],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},7457:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>R,routeModule:()=>f,serverHooks:()=>A,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>m,POST:()=>_});var a=r(49303),i=r(88716),s=r(60670),o=r(87070),l=r(9487),d=r(14749),u=r(19163),c=r(29659),p=r(90455),E=r(67829);async function m(e){try{let t=await (0,p.ts)();if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});if(!await (0,u.rt)(t.id,t.businessId,["ADMIN","MANAGER","STAFF"]))return o.NextResponse.json({error:"Forbidden"},{status:403});let{searchParams:r}=new URL(e.url),n=c.pJ.parse({status:r.get("status"),spaceId:r.get("spaceId"),from:r.get("from"),to:r.get("to"),page:r.get("page"),limit:r.get("limit")}),a={businessId:t.businessId};n.status&&(a.status=n.status),n.spaceId&&(a.spaceId=n.spaceId),n.from&&n.to&&(a.OR=[{start:{gte:n.from,lte:n.to}},{end:{gte:n.from,lte:n.to}},{AND:[{start:{lte:n.from}},{end:{gte:n.to}}]}]);let[i,s]=await Promise.all([l.db.spaceRequest.findMany({where:a,include:{space:{select:{id:!0,title:!0,slug:!0}},messages:{orderBy:{createdAt:"desc"},take:1},_count:{select:{messages:!0}}},orderBy:{createdAt:"desc"},skip:(n.page-1)*n.limit,take:n.limit}),l.db.spaceRequest.count({where:a})]);return o.NextResponse.json({requests:i,pagination:{page:n.page,limit:n.limit,total:s,pages:Math.ceil(s/n.limit)}})}catch(e){return console.error("Error fetching space requests:",e),o.NextResponse.json({error:"Failed to fetch space requests"},{status:500})}}async function _(e){try{let t=await (0,p.ts)();if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});let r=await e.json(),n=c.r.parse(r),a=await l.db.space.findFirst({where:{id:n.spaceId,status:"PUBLISHED"},include:{pricingRules:!0,calendars:{where:{OR:[{AND:[{start:{lte:n.start}},{end:{gt:n.start}}]},{AND:[{start:{lt:n.end}},{end:{gte:n.end}}]},{AND:[{start:{gte:n.start}},{end:{lte:n.end}}]}]}}}});if(!a)return o.NextResponse.json({error:"Space not found or not available"},{status:404});if(!a.calendars.some(e=>!e.isBlocked))return o.NextResponse.json({error:"Space is not available for the requested time"},{status:400});if(n.attendees>a.capacity)return o.NextResponse.json({error:`Space capacity is ${a.capacity}, requested ${n.attendees}`},{status:400});if(await l.db.spaceRequest.findFirst({where:{spaceId:n.spaceId,status:{in:["PENDING","NEEDS_PAYMENT","PAID_HOLD","CONFIRMED"]},OR:[{AND:[{start:{lte:n.start}},{end:{gt:n.start}}]},{AND:[{start:{lt:n.end}},{end:{gte:n.end}}]},{AND:[{start:{gte:n.start}},{end:{lte:n.end}}]}]}}))return o.NextResponse.json({error:"Space is already booked for the requested time"},{status:400});let i=(0,E.Z4)(a,a.pricingRules,{start:n.start,end:n.end,attendees:n.attendees}),s=await l.db.spaceRequest.create({data:{businessId:a.businessId,spaceId:n.spaceId,organizerId:n.organizerId,title:n.title,description:n.description,attendees:n.attendees,start:n.start,end:n.end,status:"PENDING",quoteAmount:i.subtotal,currency:i.currency,depositAmount:i.breakdown.deposit,cleaningFee:i.breakdown.cleaning,pricingBreakdown:i},include:{space:{select:{id:!0,title:!0,slug:!0}}}});return await (0,d.ar)(t.id,"user","SPACE_REQUEST_CREATED","SpaceRequest",s.id,a.businessId,{spaceId:n.spaceId,spaceTitle:a.title,title:n.title,attendees:n.attendees,start:n.start.toISOString(),end:n.end.toISOString(),quoteAmount:i.subtotal}),o.NextResponse.json(s,{status:201})}catch(e){if(console.error("Error creating space request:",e),e instanceof Error&&"ZodError"===e.name)return o.NextResponse.json({error:"Invalid input data",details:e.message},{status:400});return o.NextResponse.json({error:"Failed to create space request"},{status:500})}}let f=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/space/requests/route",pathname:"/api/space/requests",filename:"route",bundlePath:"app/api/space/requests/route"},resolvedPagePath:"/Users/kumar/Business admin/tripfluence-admin/app/api/space/requests/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:R,staticGenerationAsyncStorage:g,serverHooks:A}=f,y="/api/space/requests/route";function h(){return(0,s.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:g})}},14749:(e,t,r)=>{r.d(t,{ar:()=>o,sZ:()=>s});var n=r(9487),a=r(57435),i=r(60581);let s={LISTING_CREATED:"listing.created",LISTING_UPDATED:"listing.updated",LISTING_DELETED:"listing.deleted",LISTING_PUBLISHED:"listing.published",LISTING_UNPUBLISHED:"listing.unpublished",ORDER_CREATED:"order.created",ORDER_UPDATED:"order.updated",ORDER_CANCELLED:"order.cancelled",ORDER_REFUNDED:"order.refunded",SLOT_CREATED:"slot.created",SLOT_UPDATED:"slot.updated",SLOT_DELETED:"slot.deleted",SLOTS_IMPORTED:"slots.imported",SLOTS_EXPORTED:"slots.exported",WIDGET_CREATED:"widget.created",WIDGET_UPDATED:"widget.updated",WIDGET_DELETED:"widget.deleted",WIDGET_GENERATED:"widget.generated",SOCIAL_POST_CREATED:"social.post.created",SOCIAL_POST_PUBLISHED:"social.post.published",SOCIAL_POST_FAILED:"social.post.failed",SOCIAL_TEST_POST:"social.test.post",SOCIAL_ACCOUNT_CONNECTED:"social.account.connected",SOCIAL_ACCOUNT_DISCONNECTED:"social.account.disconnected",PROVIDER_CONNECTED:"provider.connected",PROVIDER_DISCONNECTED:"provider.disconnected",PROVIDER_RECONNECT_REQUESTED:"provider.reconnect.requested",PROVIDER_REFRESHED:"provider.refreshed",EVENT_SYNC_CREATED:"event.sync.created",EVENT_SYNC_UPDATED:"event.sync.updated",EVENT_SYNC_DELETED:"event.sync.deleted",EVENT_SYNC_PUBLISHED:"event.sync.published",EVENT_SYNC_IMPORTED:"event.sync.imported",EVENT_PUBLISHED:"event.published",EVENT_UPDATED:"event.updated",EVENT_FAILED:"event.failed",EVENT_TEST_PUBLISH:"event.test.publish",COUPON_CREATED:"coupon.created",COUPON_UPDATED:"coupon.updated",COUPON_DELETED:"coupon.deleted",AFFILIATE_CREATED:"affiliate.created",AFFILIATE_UPDATED:"affiliate.updated",AFFILIATE_DELETED:"affiliate.deleted",SETTINGS_UPDATED:"settings.updated",USER_CREATED:"user.created",USER_UPDATED:"user.updated",USER_DELETED:"user.deleted",WEBHOOK_CREATED:"webhook.created",WEBHOOK_UPDATED:"webhook.updated",WEBHOOK_DELETED:"webhook.deleted",API_KEY_CREATED:"api.key.created",API_KEY_DELETED:"api.key.deleted",LOGIN:"user.login",LOGOUT:"user.logout",PASSWORD_CHANGED:"user.password.changed",PERMISSION_CHANGED:"user.permission.changed"},o=async(e,t,r,s,o,l,d={},u)=>{try{let c=await n.db.auditLog.create({data:{id:(0,i.x0)(),actorId:e,actorType:t,action:r,entityType:s,entityId:o,businessId:l,metadata:JSON.stringify(d),ipAddress:u?.ipAddress,userAgent:u?.userAgent}});return a.k.info(`Audit log created: ${r} on ${s}:${o} by ${t}:${e}`),c}catch(e){throw a.k.error("Failed to create audit log entry:",e),e}}},90455:(e,t,r)=>{r.d(t,{Ql:()=>o,mk:()=>s,ts:()=>i});var n=r(71615),a=r(9487);async function i(){try{let e=(0,n.cookies)(),t=e.get("user-id")?.value;if(!t)return null;let r=await a.db.user.findUnique({where:{id:t},select:{id:!0,email:!0,firstName:!0,lastName:!0,businessId:!0,isActive:!0,lastLoginAt:!0}});if(!r||!r.isActive)return null;return r}catch(e){return console.error("Error getting current user:",e),null}}async function s(){let e=await i();if(!e)throw Error("Authentication required");return e}async function o(e){return await s()}},9487:(e,t,r)=>{r.d(t,{db:()=>o});var n=r(53524),a=r(1964);let i=globalThis,s=()=>({$queryRaw:()=>Promise.resolve([]),$executeRaw:()=>Promise.resolve(0),$transaction:e=>e({}),user:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},business:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},space:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},socialAccount:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},webhookDelivery:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},auditLog:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},spaceAvailability:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)},spaceRequest:{findMany:()=>Promise.resolve([]),findFirst:()=>Promise.resolve(null)}}),o=(()=>{process.env.SKIP_ENV_VALIDATION;try{return i.prisma??new n.PrismaClient({log:"development"===a.OB.NODE_ENV?["query","error","warn"]:["error"],datasources:{db:{url:a.OB.DATABASE_URL}}})}catch(e){return console.warn("Database connection failed during build, using mock database:",e),s()}return i.prisma??new n.PrismaClient({log:"development"===a.OB.NODE_ENV?["query","error","warn"]:["error"],datasources:{db:{url:a.OB.DATABASE_URL}}})})();"production"!==a.OB.NODE_ENV&&(i.prisma=o)},1964:(e,t,r)=>{r.d(t,{OB:()=>i});var n=r(88879);let a=n.Ryn({DATABASE_URL:n.Z_8().url("Invalid database URL"),REDIS_URL:n.Z_8().url("Invalid Redis URL").optional(),JWT_SECRET:n.Z_8().min(32,"JWT secret must be at least 32 characters"),NEXTAUTH_SECRET:n.Z_8().min(32,"NextAuth secret must be at least 32 characters").optional(),NEXTAUTH_URL:n.Z_8().url("Invalid NextAuth URL").optional(),STRIPE_SECRET_KEY:n.Z_8().startsWith("sk_","Invalid Stripe secret key").optional(),STRIPE_PUBLISHABLE_KEY:n.Z_8().startsWith("pk_","Invalid Stripe publishable key").optional(),STRIPE_WEBHOOK_SECRET:n.Z_8().optional(),RAZORPAY_KEY_ID:n.Z_8().optional(),RAZORPAY_KEY_SECRET:n.Z_8().optional(),RAZORPAY_WEBHOOK_SECRET:n.Z_8().optional(),WEBHOOK_SECRET:n.Z_8().min(32,"Webhook secret must be at least 32 characters"),FACEBOOK_APP_ID:n.Z_8().optional(),FACEBOOK_APP_SECRET:n.Z_8().optional(),FACEBOOK_PAGE_CONFIG_ID:n.Z_8().optional(),INSTAGRAM_CONFIG_ID:n.Z_8().optional(),GOOGLE_CLIENT_ID:n.Z_8().optional(),GOOGLE_CLIENT_SECRET:n.Z_8().optional(),EVENTBRITE_CLIENT_ID:n.Z_8().optional(),EVENTBRITE_CLIENT_SECRET:n.Z_8().optional(),MEETUP_CLIENT_ID:n.Z_8().optional(),MEETUP_CLIENT_SECRET:n.Z_8().optional(),OAUTH_REDIRECT_BASE:n.Z_8().url("Invalid OAuth redirect base URL").optional(),GRAPH_API_BASE:n.Z_8().url("Invalid Graph API base URL").default("https://graph.facebook.com"),GOOGLE_BUSINESS_API_BASE:n.Z_8().url("Invalid Google Business Profile API base URL").default("https://mybusiness.googleapis.com"),ENCRYPTION_KEY:n.Z_8().length(64,"Encryption key must be 64 hex characters (32 bytes)").optional(),FEATURE_REAL_PROVIDERS:n.Z_8().transform(e=>"true"===e).default("false"),SMTP_HOST:n.Z_8().optional(),SMTP_PORT:n.Z_8().transform(Number).optional(),SMTP_USER:n.Z_8().optional(),SMTP_PASSWORD:n.Z_8().optional(),SMTP_FROM:n.Z_8().email("Invalid SMTP from email").optional(),TWILIO_ACCOUNT_SID:n.Z_8().optional(),TWILIO_AUTH_TOKEN:n.Z_8().optional(),TWILIO_PHONE_NUMBER:n.Z_8().optional(),AWS_ACCESS_KEY_ID:n.Z_8().optional(),AWS_SECRET_ACCESS_KEY:n.Z_8().optional(),AWS_REGION:n.Z_8().optional(),AWS_S3_BUCKET:n.Z_8().optional(),SENTRY_DSN:n.Z_8().url("Invalid Sentry DSN").optional(),NODE_ENV:n.KmV(["development","production","test"]).default("development"),PORT:n.Z_8().transform(Number).default("3000")}),i=(()=>{if("true"===process.env.SKIP_ENV_VALIDATION)return{DATABASE_URL:process.env.DATABASE_URL||"postgresql://dummy:dummy@localhost:5432/dummy",JWT_SECRET:process.env.JWT_SECRET||"dummy-jwt-secret-key-minimum-32-characters-long",WEBHOOK_SECRET:process.env.WEBHOOK_SECRET||"dummy-webhook-secret-key-minimum-32-characters-long",NODE_ENV:"production",PORT:process.env.PORT||"3000",FEATURE_REAL_PROVIDERS:!1,GRAPH_API_BASE:"https://graph.facebook.com",GOOGLE_BUSINESS_API_BASE:"https://mybusiness.googleapis.com"};try{return a.parse(process.env)}catch(e){if(e instanceof n.jmq&&e.errors){let t=e.errors.filter(e=>"invalid_type"===e.code&&"undefined"===e.received).map(e=>e.path.join(".")),r=e.errors.filter(e=>"invalid_type"!==e.code).map(e=>`${e.path.join(".")}: ${e.message}`),n="Environment validation failed:\n";throw t.length>0&&(n+=`
Missing required variables:
${t.map(e=>`  - ${e}`).join("\n")}`),r.length>0&&(n+=`
Invalid variables:
${r.map(e=>`  - ${e}`).join("\n")}`),Error(n)}throw e}})();i.NODE_ENV,i.NODE_ENV,i.NODE_ENV},60581:(e,t,r)=>{r.d(t,{x0:()=>n.x0});var n=r(42549);(0,n.kP)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",8),(0,n.kP)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",10),(0,n.kP)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",8)},57435:(e,t,r)=>{r.d(t,{k:()=>n});let n={info:(e,...t)=>{console.log(`[INFO] ${e}`,...t)},warn:(e,...t)=>{console.warn(`[WARN] ${e}`,...t)},error:(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},debug:(e,...t)=>{}}},19163:(e,t,r)=>{r.d(t,{hS:()=>l,rt:()=>i});var n=r(9487),a=r(53524);async function i(e,t,r){try{return!!await n.db.roleAssignment.findFirst({where:{userId:e,businessId:t,role:{in:r}}})}catch(e){return console.error("Error checking RBAC:",e),!1}}async function s(e,t){try{let r=await n.db.roleAssignment.findFirst({where:{userId:e,businessId:t}});return r?.role||null}catch(e){return console.error("Error getting user role:",e),null}}async function o(e,t,r){try{let n=await s(e,t);if(!n)return!1;let i={[a.Role.ADMIN]:["spaces.create","spaces.read","spaces.update","spaces.delete","spaces.publish","requests.read","requests.approve","requests.decline","requests.cancel","pricing.manage","availability.manage","payouts.manage","users.manage","settings.manage"],[a.Role.MANAGER]:["spaces.create","spaces.read","spaces.update","spaces.publish","requests.read","requests.approve","requests.decline","requests.cancel","pricing.manage","availability.manage","payouts.view"],[a.Role.STAFF]:["spaces.read","requests.read","requests.cancel","availability.read"],[a.Role.INFLUENCER]:["spaces.read"]};return i[n]?.includes(r)||!1}catch(e){return console.error("Error checking permission:",e),!1}}let l={checkRBAC:i,getUserRole:s,hasPermission:o}},67829:(e,t,r)=>{r.d(t,{Z4:()=>a,h0:()=>i,lx:()=>s});var n=r(53524);function a(e,t,r){let a=r.end.getTime()-r.start.getTime(),i=Math.ceil(a/36e5),s=Math.ceil(a/864e5),o=[],l=0,d=0,u=0,c=0,p=0,E=t.find(e=>e.kind===n.PricingKind.HOURLY),m=t.find(e=>e.kind===n.PricingKind.DAILY);if(m&&i>=8&&m){let e=m.amount*s;d=e,o.push({label:`Daily rate (${s} day${s>1?"s":""})`,amount:e,kind:n.PricingKind.DAILY})}else if(E){let e=E.amount*i;d=e,o.push({label:`Hourly rate (${i} hour${i>1?"s":""})`,amount:e,kind:n.PricingKind.HOURLY})}let _=t.find(e=>e.kind===n.PricingKind.PEAK);if(_&&function(e,t,r){if(r.dow&&r.dow.length>0){let n=e.getDay(),a=t.getDay();if(!r.dow.some(e=>n<=a?e>=n&&e<=a:e>=n||e<=a))return!1}if(null!==r.startHour&&null!==r.endHour){let n=e.getHours();return!(t.getHours()<=r.startHour||n>=r.endHour)}return!0}(r.start,r.end,_)){let e=function(e,t,r){let n=Math.ceil((r.end.getTime()-r.start.getTime())/36e5);return Math.round(Math.max(0,t.amount-e/n)*n)}(d,_,r);e>0&&(u=e,o.push({label:"Peak time surcharge",amount:e,kind:n.PricingKind.PEAK}))}let f=t.find(e=>e.kind===n.PricingKind.CLEANING_FEE);f&&(c=f.amount,o.push({label:"Cleaning fee",amount:c,kind:n.PricingKind.CLEANING_FEE}));let R=t.find(e=>e.kind===n.PricingKind.SECURITY_DEPOSIT);R&&(p=R.amount,o.push({label:"Security deposit",amount:p,kind:n.PricingKind.SECURITY_DEPOSIT}));let g=(l=d+u+c)+p;return{lines:o,subtotal:l,total:g,currency:t[0]?.currency||"USD",breakdown:{base:d,peak:u,cleaning:c,deposit:p}}}function i(e){let t=e.find(e=>e.kind===n.PricingKind.HOURLY),r=e.find(e=>e.kind===n.PricingKind.DAILY),a=t?.amount||0;if(r){let e=Math.ceil(r.amount/8);a=a>0?Math.min(a,e):e}return a}function s(e){let t=[],r=e.some(e=>e.kind===n.PricingKind.HOURLY),a=e.some(e=>e.kind===n.PricingKind.DAILY);r||a||t.push("At least one base pricing rule (hourly or daily) is required");let i=e.map(e=>e.kind),s=i.filter((e,t)=>i.indexOf(e)!==t);for(let r of(s.length>0&&t.push(`Duplicate pricing rule types: ${s.join(", ")}`),e.filter(e=>e.kind===n.PricingKind.PEAK)))r.dow&&0===r.dow.length&&(null===r.startHour||null===r.endHour)&&t.push("Peak pricing rule must specify either days of week or time range");return t}},29659:(e,t,r)=>{r.d(t,{Aw:()=>u,BP:()=>E,Cc:()=>s,GW:()=>A,IZ:()=>i,QU:()=>l,W7:()=>_,Xu:()=>p,Yp:()=>f,_2:()=>R,mD:()=>m,pJ:()=>y,qe:()=>a,r:()=>c,x1:()=>g});var n=r(88879);let a=n.Ryn({title:n.Z_8().min(1,"Title is required").max(100,"Title too long"),slug:n.Z_8().min(1,"Slug is required").max(50,"Slug too long").regex(/^[a-z0-9-]+$/,"Slug must contain only lowercase letters, numbers, and hyphens"),description:n.Z_8().min(10,"Description must be at least 10 characters").max(1e3,"Description too long"),photos:n.IXX(n.Z_8().url("Invalid photo URL")).max(10,"Maximum 10 photos allowed"),location:n.Ryn({address:n.Z_8().min(1,"Address is required"),lat:n.Rxh().min(-90).max(90),lng:n.Rxh().min(-180).max(180)}),capacity:n.Rxh().int().min(1,"Capacity must be at least 1").max(1e3,"Capacity too large"),floorAreaM2:n.Rxh().int().min(1).max(1e4).optional(),amenities:n.IXX(n.Ryn({label:n.Z_8().min(1,"Amenity label is required"),category:n.Z_8().optional()})).max(20,"Maximum 20 amenities allowed"),rules:n.IXX(n.Ryn({label:n.Z_8().min(1,"Rule label is required"),required:n.O72()})).max(10,"Maximum 10 rules allowed")}),i=a.partial().extend({id:n.Z_8().cuid()}),s=n.Ryn({id:n.Z_8().cuid()}),o=n.Ryn({kind:n.KmV(["HOURLY","DAILY","PEAK","CLEANING_FEE","SECURITY_DEPOSIT"]),amount:n.Rxh().int().min(0,"Amount must be positive"),currency:n.Z_8().length(3,"Currency must be 3 characters"),dow:n.IXX(n.Rxh().int().min(0).max(6)).default([]),startHour:n.Rxh().int().min(0).max(23).optional(),endHour:n.Rxh().int().min(0).max(23).optional()}).refine(e=>void 0===e.startHour||void 0===e.endHour||e.startHour<e.endHour,{message:"Start hour must be before end hour",path:["endHour"]}),l=n.Ryn({spaceId:n.Z_8().cuid(),rules:n.IXX(o).max(10,"Maximum 10 pricing rules allowed")}),d=n.Ryn({spaceId:n.Z_8().cuid(),start:n.oQ2.date(),end:n.oQ2.date(),isBlocked:n.O72().default(!1),notes:n.Z_8().max(500).optional()}).refine(e=>e.start<e.end,{message:"Start time must be before end time",path:["end"]}),u=n.Ryn({spaceId:n.Z_8().cuid(),blocks:n.IXX(d.omit({spaceId:!0})).max(50,"Maximum 50 availability blocks allowed")}),c=n.Ryn({spaceId:n.Z_8().cuid(),title:n.Z_8().min(1,"Title is required").max(100,"Title too long"),description:n.Z_8().max(500).optional(),attendees:n.Rxh().int().min(1,"At least 1 attendee required").max(1e3,"Too many attendees"),start:n.oQ2.date(),end:n.oQ2.date(),organizerId:n.Z_8().min(1,"Organizer ID is required")}).refine(e=>e.start<e.end,{message:"Start time must be before end time",path:["end"]}).refine(e=>e.end.getTime()-e.start.getTime()<=864e5,{message:"Booking duration cannot exceed 24 hours",path:["end"]}),p=n.Ryn({requestId:n.Z_8().cuid(),quoteAmount:n.Rxh().int().min(0,"Quote amount must be positive"),depositAmount:n.Rxh().int().min(0).optional(),cleaningFee:n.Rxh().int().min(0).optional(),pricingBreakdown:n.IMB(n.YjB())}),E=n.Ryn({requestId:n.Z_8().cuid(),decision:n.KmV(["approve","decline"]),message:n.Z_8().max(500).optional()}),m=n.Ryn({requestId:n.Z_8().cuid(),reason:n.Z_8().max(200).optional()}),_=n.Ryn({spaceReqId:n.Z_8().cuid(),body:n.Z_8().min(1,"Message body is required").max(1e3,"Message too long"),attachments:n.IXX(n.Z_8().url("Invalid attachment URL")).max(5,"Maximum 5 attachments allowed").optional()});n.Ryn({requestId:n.Z_8().cuid(),paymentMethodId:n.Z_8().min(1,"Payment method is required"),idempotencyKey:n.Z_8().uuid("Invalid idempotency key")}),n.Ryn({businessId:n.Z_8().cuid(),returnUrl:n.Z_8().url("Invalid return URL").optional(),refreshUrl:n.Z_8().url("Invalid refresh URL").optional()});let f=n.Ryn({city:n.Z_8().optional(),priceMin:n.oQ2.number().int().min(0).optional(),priceMax:n.oQ2.number().int().min(0).optional(),capacity:n.oQ2.number().int().min(1).optional(),amenities:n.IXX(n.Z_8()).optional(),from:n.oQ2.date().optional(),to:n.oQ2.date().optional(),page:n.oQ2.number().int().min(1).default(1),limit:n.oQ2.number().int().min(1).max(50).default(24),sort:n.KmV(["relevance","price_asc","price_desc","capacity","distance"]).default("relevance"),lat:n.oQ2.number().optional(),lng:n.oQ2.number().optional(),radius:n.oQ2.number().int().min(1).max(100).default(50)}),R=n.Ryn({spaceId:n.Z_8().cuid(),from:n.oQ2.date(),to:n.oQ2.date()}),g=n.Ryn({spaceId:n.Z_8().cuid(),start:n.oQ2.date(),end:n.oQ2.date(),attendees:n.Rxh().int().min(1).max(1e3)});n.Ryn({q:n.Z_8().min(1,"Search query is required").max(100,"Query too long"),filters:n.Ryn({city:n.Z_8().optional(),priceRange:n.bcc([n.Rxh(),n.Rxh()]).optional(),capacity:n.Rxh().int().min(1).optional(),amenities:n.IXX(n.Z_8()).optional()}).optional(),page:n.oQ2.number().int().min(1).default(1),limit:n.oQ2.number().int().min(1).max(50).default(20)});let A=n.Ryn({status:n.KmV(["DRAFT","PUBLISHED","ARCHIVED"]).optional(),city:n.Z_8().optional(),capacity:n.oQ2.number().int().min(1).optional(),q:n.Z_8().optional(),page:n.oQ2.number().int().min(1).default(1),limit:n.oQ2.number().int().min(1).max(100).default(20)}),y=n.Ryn({status:n.KmV(["PENDING","APPROVED","DECLINED","CANCELLED"]).optional(),spaceId:n.Z_8().cuid().optional(),from:n.oQ2.date().optional(),to:n.oQ2.date().optional(),page:n.oQ2.number().int().min(1).default(1),limit:n.oQ2.number().int().min(1).max(100).default(20)})},71615:(e,t,r)=>{var n=r(88757);r.o(n,"cookies")&&r.d(t,{cookies:function(){return n.cookies}})},33085:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return i}});let n=r(45869),a=r(6278);class i{get isEnabled(){return this._provider.isEnabled}enable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,a.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,a.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cookies:function(){return p},draftMode:function(){return E},headers:function(){return c}});let n=r(68996),a=r(53047),i=r(92044),s=r(72934),o=r(33085),l=r(6278),d=r(45869),u=r(54580);function c(){let e="headers",t=d.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return a.HeadersAdapter.seal(new Headers({}));(0,l.trackDynamicDataAccessed)(t,e)}return(0,u.getExpectedRequestStore)(e).headers}function p(){let e="cookies",t=d.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({})));(0,l.trackDynamicDataAccessed)(t,e)}let r=(0,u.getExpectedRequestStore)(e),a=s.actionAsyncStorage.getStore();return(null==a?void 0:a.isAction)||(null==a?void 0:a.isAppRoute)?r.mutableCookies:r.cookies}function E(){let e=(0,u.getExpectedRequestStore)("draftMode");return new o.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53047:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return i},ReadonlyHeadersError:function(){return a}});let n=r(38238);class a extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new a}}class i extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,a){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,a);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==s)return n.ReflectAdapter.get(t,s,a)},set(t,r,a,i){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,a,i);let s=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===s);return n.ReflectAdapter.set(t,o??r,a,i)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0!==i&&n.ReflectAdapter.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0===i||n.ReflectAdapter.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return a.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new i(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},68996:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return c},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return o},appendMutableCookies:function(){return u},getModifiedCookieValues:function(){return d}});let n=r(92044),a=r(38238),i=r(45869);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new s}}class o{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return a.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function d(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function u(e,t){let r=d(t);if(0===r.length)return!1;let a=new n.ResponseCookies(e),i=a.getAll();for(let e of r)a.set(e);for(let e of i)a.set(e);return!0}class c{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let s=[],o=new Set,d=()=>{let e=i.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),s=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of s){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case l:return s;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{d()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{d()}};default:return a.ReflectAdapter.get(e,t,r)}}})}}},42549:(e,t,r)=>{let n,a;r.d(t,{kP:()=>o,x0:()=>l});var i=r(6005);function s(e){!n||n.length<e?(n=Buffer.allocUnsafe(128*e),i.webcrypto.getRandomValues(n),a=0):a+e>n.length&&(i.webcrypto.getRandomValues(n),a=0),a+=e}function o(e,t=21){var r;let i,o;return r=t,o=Math.ceil(1.6*(i=(2<<31-Math.clz32(e.length-1|1))-1)*r/e.length),(t=r)=>{if(!t)return"";let l="";for(;;){var d;let r=(s(d=0|o),n.subarray(a-d,a)),u=o;for(;u--;)if((l+=e[r[u]&i]||"").length>=t)return l}}}function l(e=21){s(e|=0);let t="";for(let r=a-e;r<a;r++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[r]];return t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,147,5972],()=>r(7457));module.exports=n})();